# Cloud - 高性能分布式网盘系统

Cloud 是一个基于 Go 语言开发的高性能分布式网盘系统，提供安全可靠的文件存储、分享和同步功能。系统采用现代化的分布式架构，支持大文件传输、断点续传、实时预览等功能，为用户提供流畅的文件管理体验。

## 核心特性

### 高可用分布式存储
- 基于 MinIO 集群存储文件对象，采用 EC 纠删码特性
- 保证存储高可用性，数据冗余和恢复能力
- 支持实时文件预览功能，提升用户体验

### 高效文件传输
- 大文件智能分块上传，根据文件大小动态调整分块策略
- 有效降低单次传输内存占用，提高传输稳定性
- 基于 HTTP Range 实现断点续传与分段下载
- 流式传输技术，结合网络状况动态调整下载策略
- 实现精确的带宽控制，优化网络资源利用

### 并发下载与批量处理
- 队列化、并发调度下载任务，显著提升批量下载性能
- 支持文件夹打包与一键下载功能
- 相比顺序下载大幅提升了下载效率

### 服务保障与安全控制
- 采用令牌桶算法进行下载限流，确保服务稳定性
- 支持多角色的限速策略，合理分配系统资源
- 完善的权限控制和安全机制

### 多端同步
- 基于 Websocket、Kafka 实现多端实时同步
- 确保文件一致性，提供无缝的多设备体验
- 支持文件更新与冲突处理

## 技术栈

- **后端**: Go
- **前端**: [cloud-web](https://github.com/crazyfrankie/cloud-web)
- **存储**: MinIO (对象存储)
- **数据库**: MySQL
- **缓存**: Redis
- **消息队列**: Kafka
- **实时通信**: Websocket

## 快速开始

### 环境要求
- Go 1.18+
- Docker & Docker Compose
- MinIO 集群
- MySQL 8.0+
- Redis

### 部署步骤

1. 克隆仓库
```bash
git clone https://github.com/yourusername/cloud.git
cd cloud
```

2. 启动依赖服务
```bash
docker-compose up -d
```

3. 编译并运行
```bash
go build -o cloud ./cmd
./cloud
```

4. 前端部署
```bash
git clone https://github.com/crazyfrankie/cloud-web.git
cd cloud-web
# 按照前端仓库的说明进行部署
```

## 系统架构

```
┌─────────────┐      ┌─────────────┐
│  客户端应用  │◄────►│  Web 前端   │
└─────────────┘      └──────┬──────┘
                           │
                     ┌─────▼─────┐
                     │  API 网关  │
                     └─────┬─────┘
                           │
┌───────────────────────────────────────────┐
│                                           │
│  ┌─────────────┐  ┌─────────────────────┐ │
│  │ 用户服务      │  │ 文件服务             │ │
│  └─────────────┘  │ - 上传/下载控制       │ │
│  ┌─────────────┐  │ - 分块管理           │ │
│  │ 权限服务      │  │ - 限流控制           │ │
│  └─────────────┘  └─────────────────────┘ │
│                                           │
│  ┌─────────────┐  ┌─────────────────────┐ │
│  │ 同步服务      │  │    预览服务          │ │ 
│  └─────────────┘  └─────────────────────┘ │
│                                           │
└───────────────────────────────────────────┘
             │         │        │
    ┌────────┴─────────┴────────┴──────────┐
    │                                      │
    │  ┌──────────┐ ┌───────┐ ┌────────┐   │
    │  │  MinIO   │ │ MySQL │ │ Redis  │   │
    │  └──────────┘ └───────┘ └────────┘   │
    │                                      │
    │  ┌──────────┐                        │
    │  │  Kafka   │                        │
    │  └──────────┘                        │
    │                                      │
    └──────────────────────────────────────┘
```

## TODO 列表
- [ ] 文件更新功能优化
- [ ] 多端同步机制完善
- [ ] 性能优化与监控
- [ ] 更多文件格式的预览支持

## 贡献指南
欢迎提交 Issue 和 Pull Request 来帮助改进项目。

## 许可证
[待定]
